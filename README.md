# facedetect_app1
readme_content = """
# 🎭 FaceDetectApp – 自分以外の顔だけに絵文字を重ねる顔認識アプリ

## 📘 概要（背景・目的）
本アプリは、**自分の顔を学習して記憶し、自分以外の人物にだけ絵文字を重ねてマスク処理を行う** デスクトップアプリケーションです。  
SNSや写真共有の際に、**他人のプライバシーを守りながら写真を共有したい**というニーズから着想を得て開発しました。  

OpenCV の顔検出機能と、OpenFace の顔特徴量モデル（`openface_nn4.small2.v1.t7`）を組み合わせ、  
GUI（PySimpleGUI）上で以下を行えます：
- 自分の顔画像の学習  
- 類似度判定  
- 他人の顔のみ絵文字でマスク  

---

## ⚙️ 使用技術
| 分類 | 内容 |
|------|------|
| 言語 | Python |
| 主要ライブラリ | OpenCV, NumPy, PySimpleGUI |
| 顔特徴抽出 | OpenFace (`.t7 model`) |
| 顔検出 | HaarCascade (OpenCV) |
| GUI構築 | PySimpleGUI |
| 画像処理 | OpenCV（アルファチャンネル合成処理） |

---

## 🧩 主な機能
- **自分の顔を学習**（複数枚対応）  
- **類似度判定**により、自分の顔と他人の顔を区別  
- **他人の顔にのみ絵文字を自動合成**（透過PNG対応）  
- **PySimpleGUIによる直感的な操作UI**

---

## 💡 アプリの使い方
1. `models/openface_nn4.small2.v1.t7` を配置  
2. 「学習画像を追加」ボタンから自分の顔画像を選択  
3. 「📘 再学習する」で顔特徴量を学習  
4. 判定したい画像を選択  
5. 自分以外の人物の顔にだけ絵文字が自動で貼られる  

---

## 💥 開発の難所と解決したこと（困難だった点）

### 1. 顔認識精度の確保
**課題：**  
OpenCV の `CascadeClassifier` では顔検出はできても、「誰の顔か」は判別できない。  

**解決：**  
OpenFace モデルを使用して顔を128次元ベクトル化。  
自分の顔の複数ベクトルを平均化して特徴量を作り、**コサイン類似度**で判定。  
これにより、高精度に「自分」と「他人」を分類できた。

---

### 2. 透過PNGの合成処理
**課題：**  
OpenCV の `imshow` は透過PNGを正しく表示できず、背景が緑になる。  

**解決：**  
アルファチャンネルを使ったブレンド処理 `(α×前景 + (1−α)×背景)` を実装。  
自然な形で顔に絵文字を合成可能に。

---

### 3. GUIとの連携
**課題：**  
OpenCV → PySimpleGUI に表示するには、画像を Base64 に変換する必要があった。  

**解決：**  
`cv2.imencode()` で PNG に変換し、Base64 にエンコードして GUI に表示。  
これにより、学習・判定結果をリアルタイムで確認できるようになった。

---

## 🎯 成果・学び
- 顔認識における **特徴ベクトルの扱いと類似度計算** の理解  
- OpenCV と GUI の組み合わせによる **実用的なツール開発力**  
- 技術的課題を段階的に解決する **問題解決力**

---

## 📷 実行例画像

### オリジナル
![オリジナル](docs/orig_example.jpg)

### 処理後（自分以外に絵文字が貼られています）
![処理後](docs/proc_example.jpg)

> 💡 画像は `docs/` フォルダ内に配置してください。  

---

## 🧑‍💻 今後の展望
- 顔向きに合わせて絵文字を回転させる機能  
- 動画対応（リアルタイム顔認識）  
- 類似度しきい値をユーザー設定可能に  

---

## ✨ 作者コメント
大学の研究・趣味のプログラミングを通じて、「画像処理」と「ユーザー体験の向上」の両立に興味を持ちました。  
このアプリでは、**技術と実用性を両立する設計力**を意識して開発しました。  
「自分以外の顔を隠す」というユニークな発想を、確かな実装力で形にできた自信作です。
"""

# README.md に書き込む
with open("README.md", "w", encoding="utf-8") as f:
    f.write(readme_content)

print("✅ README.md が作成されました")
